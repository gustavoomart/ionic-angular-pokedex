import{a as q,b as G}from"./chunk-RWDMHOF2.js";import{$ as z,B as F,C,D as T,E as O,G as w,K as M,M as E,T as j,V as D,W as B,aa as N,ca as R,da as A,ea as H,fa as U,ga as L,ia as $,j as s,k as d,l as I,m as b,n as _,o as p,p as k,q as r,r as a,s as f,u as g,v as P,w as c,x as S,y as v,z as y}from"./chunk-2IGUULTY.js";import"./chunk-AW5PRJD7.js";import"./chunk-X2LLLM27.js";import"./chunk-GDTBDVVA.js";import"./chunk-EYVCEYVV.js";import"./chunk-YKMIF4NY.js";import"./chunk-YVBCZ55L.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-O4PCMGUI.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{i as u}from"./chunk-OYAVQN5W.js";var J=(()=>{let t=class t{transform(i){return i?i.split("-").map(o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()).join(" "):""}};t.\u0275fac=function(o){return new(o||t)},t.\u0275pipe=b({name:"kebabToTitle",type:t,pure:!0});let n=t;return n})();function Q(n,t){n&1&&(r(0,"div")(1,"ion-row",14)(2,"h2"),c(3,"Descri\xE7\xF5es"),a(),f(4,"div",15),a()())}function V(n,t){n&1&&(r(0,"div")(1,"h2"),c(2,"Descri\xE7\xF5es"),a()())}function W(n,t){if(n&1&&(r(0,"div")(1,"p"),c(2),a()()),n&2){let h=t.$implicit;s(2),v("\u2022 ",h,"")}}function X(n,t){if(n&1&&(r(0,"div"),_(1,W,3,1,"div",16),a()),n&2){let h=P();s(),p("ngForOf",h.flavourTexts)}}var ae=(()=>{let t=class t{constructor(i,o,e,l){this.router=i,this.route=o,this.pokeapiService=e,this.favoritesService=l,this.sprites=[],this.isFavorite=!1,this.currentIndex=0,this.specieInfo=null,this.flavourTexts=[]}loadPokemon(){let i=this.router.getCurrentNavigation();if(i!=null&&i.extras.state){this.pokemon=i.extras.state.pokemon;let o=this.pokemon.sprites.other;this.sprites=[...Object.values(o["official-artwork"]).filter(e=>e!==null),...Object.values(o.home).filter(e=>e!==null),...Object.values(o.dream_world).filter(e=>e!==null)]}else this.router.navigate(["/home"])}ngOnInit(){return u(this,null,function*(){this.loadPokemon(),this.loadFlavorTexts(),yield this.loadIsFavorite()})}loadIsFavorite(){return u(this,null,function*(){let i=Number(this.route.snapshot.paramMap.get("id"));this.isFavorite=yield this.favoritesService.isFavorite(i)})}loadFlavorTexts(){let i=navigator.language,o=this.pokemon.species.url;this.pokeapiService.getPokemonSpecie(o).subscribe(e=>{this.specieInfo=e;let l=e.flavor_text_entries.filter(m=>m.language.name===i);l.length===0&&(l=e.flavor_text_entries.filter(m=>m.language.name==="en"));let x=l.map(m=>m.flavor_text.replace(/[\n\f\r]/g," ").trim());this.flavourTexts=[...new Set(x)]})}nextImage(){this.sprites.length!==0&&(this.currentIndex=(this.currentIndex+1)%this.sprites.length)}prevImage(){this.sprites.length!==0&&(this.currentIndex=(this.currentIndex-1+this.sprites.length)%this.sprites.length)}toggleFavorite(i){return u(this,null,function*(){i.stopPropagation(),yield this.favoritesService.toggleFavorite(this.pokemon),this.isFavorite=yield this.favoritesService.isFavorite(this.pokemon.id)})}};t.\u0275fac=function(o){return new(o||t)(d(E),d(M),d(q),d(G))},t.\u0275cmp=I({type:t,selectors:[["pokemon-details"]],features:[y([])],decls:31,vars:12,consts:[["slot","start"],["defaultHref","/home"],["slot","end"],["fill","clear",1,"favorite-button",3,"click"],["slot","icon-only",3,"name"],["size","5",1,"image-div"],[1,"sprite-image",3,"src"],[1,"pagination-container"],["size","small","shape","round",3,"click"],["slot","icon-only","name","caret-back-outline"],["slot","icon-only","name","caret-forward-outline"],[1,"descriptions"],["size","7"],[4,"ngIf"],[1,"center-items"],[1,"loader",2,"margin-left","20px"],[4,"ngFor","ngForOf"]],template:function(o,e){o&1&&(r(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),f(3,"ion-back-button",1),a(),r(4,"ion-buttons",2)(5,"ion-button",3),g("click",function(x){return e.toggleFavorite(x)}),f(6,"ion-icon",4),a()(),r(7,"ion-title"),c(8),F(9,"kebabToTitle"),a()()(),r(10,"ion-content")(11,"ion-col")(12,"ion-col",5),f(13,"ion-img",6),r(14,"div",7)(15,"ion-button",8),g("click",function(){return e.prevImage()}),f(16,"ion-icon",9),a(),r(17,"label")(18,"span"),c(19),a(),r(20,"span"),c(21," / "),a(),r(22,"span"),c(23),a()(),r(24,"ion-button",8),g("click",function(){return e.nextImage()}),f(25,"ion-icon",10),a()()(),r(26,"div",11)(27,"ion-col",12),_(28,Q,5,0,"div",13)(29,V,3,0,"div",13)(30,X,2,1,"div",13),a()()()()),o&2&&(s(5),k("favorited",e.isFavorite),s(),p("name",e.isFavorite?"heart":"heart-outline"),s(2),S(C(9,10,e.pokemon.name)),s(5),p("src",e.sprites[e.currentIndex]),s(6),v(" ",e.currentIndex+1," "),s(4),v(" ",e.sprites.length," "),s(5),p("ngIf",e.flavourTexts.length==0),s(),p("ngIf",e.flavourTexts.length>0),s(),p("ngIf",e.flavourTexts.length>0))},dependencies:[R,$,D,L,w,T,O,z,B,j,U,A,N,J,H],styles:[".image-div[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-self:center}.center-items[_ngcontent-%COMP%]{align-items:center;display:flex;gap:8px}.center-items[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;line-height:1}.pagination-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;text-align:center;gap:16px}.sprite-image[_ngcontent-%COMP%]{max-width:300px;width:150px;height:150px;max-height:300px;object-fit:contain}.descriptions[_ngcontent-%COMP%]{padding:32px}.favorite-button[_ngcontent-%COMP%]{--border-radius: 50%;--color: #666;width:32px;height:32px}.favorite-button.favorited[_ngcontent-%COMP%]{--color: #ff0000 !important}.favorite-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}",".loader[_ngcontent-%COMP%]{width:12px;aspect-ratio:1;border-radius:50%;animation:_ngcontent-%COMP%_l5 1s infinite linear alternate}@keyframes _ngcontent-%COMP%_l5{0%{box-shadow:20px 0 #fff,-20px 0 #fff2;background:#fff}33%{box-shadow:20px 0 #fff,-20px 0 #fff2;background:#fff2}66%{box-shadow:20px 0 #fff2,-20px 0 #fff;background:#fff2}to{box-shadow:20px 0 #fff2,-20px 0 #fff;background:#fff}}"]});let n=t;return n})();export{ae as DetailsPage};
