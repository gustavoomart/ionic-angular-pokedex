import{I as g,a as c,b as f,c as p,d as n,e as h,ka as v}from"./chunk-2IGUULTY.js";import{i as s}from"./chunk-OYAVQN5W.js";var w=(()=>{let a=class a{constructor(t){this.http=t,this.apiUrl="https://pokeapi.co/api/v2"}getPokemon(t){return this.http.get(`${this.apiUrl}/pokemon/${t}`)}getPokemonSpecie(t){return this.http.get(t)}getPokemonsList(t=20,i=0){return this.http.get(`${this.apiUrl}/pokemon?limit=${t}&offset=${i}`).pipe(p(e=>{let r=e.results.map(m=>this.getPokemon(m.name));return f(r)}))}getTotalPages(t=20){return this.http.get(`${this.apiUrl}/pokemon?limit=1`).pipe(c(i=>Math.ceil(i.count/t)))}};a.\u0275fac=function(i){return new(i||a)(h(g))},a.\u0275prov=n({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();var k=(()=>{let a=class a{constructor(t){this.storage=t,this._storage=null,this.storageKey="favoritePokemons",this.favoriteStatus={},this.init()}init(){return s(this,null,function*(){this._storage=yield this.storage.create()})}getFavorites(){return s(this,null,function*(){var i;yield this._checkInit();let t=yield(i=this._storage)==null?void 0:i.get(this.storageKey);return t||[]})}addFavorite(t){return s(this,null,function*(){var e;yield this._checkInit();let i=yield this.getFavorites();i.find(r=>r.id===t.id)||(i.push(t),yield(e=this._storage)==null?void 0:e.set(this.storageKey,i))})}removeFavorite(t){return s(this,null,function*(){var e;yield this._checkInit();let i=(yield this.getFavorites()).filter(r=>r.id!==t);yield(e=this._storage)==null?void 0:e.set(this.storageKey,i)})}loadFavoriteStatus(t){return s(this,null,function*(){yield this._checkInit();for(let i of t){let e=yield this.isFavorite(i.id);this.favoriteStatus[i.id]=e}})}isFavorite(t){return s(this,null,function*(){return yield this._checkInit(),(yield this.getFavorites()).some(e=>e.id===t)})}toggleFavorite(t){return s(this,null,function*(){yield this._checkInit(),(yield this.isFavorite(t.id))?(yield this.removeFavorite(t.id),this.favoriteStatus[t.id]=!1):(yield this.addFavorite(t),this.favoriteStatus[t.id]=!0)})}_checkInit(){return s(this,null,function*(){this._storage||(yield this.init())})}};a.\u0275fac=function(i){return new(i||a)(h(v))},a.\u0275prov=n({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();export{w as a,k as b};
